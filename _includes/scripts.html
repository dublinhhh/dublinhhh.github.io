<script>
  (function() {
    var touchStartX = 0;
    var touchEndX = 0;
    var threshold = 75;

    document.addEventListener('touchstart', function(e) {
      touchStartX = e.changedTouches[0].screenX;
    }, { passive: true });

    document.addEventListener('touchend', function(e) {
      touchEndX = e.changedTouches[0].screenX;
      handleSwipe();
    }, { passive: true });

    function handleSwipe() {
      var diff = touchStartX - touchEndX;
      if (Math.abs(diff) < threshold) return;

      // Get pager links, excluding disabled ones
      var pagers = document.querySelectorAll('a.pagination--pager:not(.disabled)');
      if (!pagers.length) return;

      // MM renders previous first, next second
      var prevLink = null;
      var nextLink = null;
      pagers.forEach(function(a) {
        var text = a.textContent.trim().toLowerCase();
        if (text === 'previous') prevLink = a;
        if (text === 'next') nextLink = a;
      });

      if (diff > 0 && nextLink) {
        // swiped left → next
        window.location.href = nextLink.href;
      } else if (diff < 0 && prevLink) {
        // swiped right → previous
        window.location.href = prevLink.href;
      }
    }
  })();
</script>
